#+TITLE: numhask-bench

Performance testing of [[https://hackage.haskell.org/package/numhask-array][numhask-array]] using [[https://hackage.haskell.org/package/perf][perf]].

To install the benchmark locally:

#+begin_src sh
cabal build && cabal install
#+end_src

* defaults

#+begin_src sh
numhask-bench --runs 10000 -m 10
#+end_src

#+RESULTS:
|   | label1          | label2 | results |
|   | ---             | ---    |     --- |
|   | dynamic         | time   | 13700.0 |
|   | fixed           | time   | 26400.0 |
|   | hmatrix         | time   |  2300.0 |
|   | numhask-hmatrix | time   |  2370.0 |

#+begin_src sh
numhask-bench --runs 10000 -m 10 --best
#+end_src

#+RESULTS:
|   | label1          | label2 | results |
|   | ---             | ---    |     --- |
|   | dynamic         | time   |  1340.0 |
|   | fixed           | time   |  1400.0 |
|   | hmatrix         | time   |   921.0 |
|   | numhask-hmatrix | time   |   922.0 |

* runtime control

https://downloads.haskell.org/~ghc/9.0.1/docs/html/users_guide/runtime_control.html

#+begin_src sh
numhask-bench --runs 10000 -m 10 +RTS -A128m -Fd4 -xn
#+end_src

#+RESULTS:
|   | label1          | label2 | results |
|   | ---             | ---    |     --- |
|   | dynamic         | time   | 23900.0 |
|   | fixed           | time   |  2200.0 |
|   | hmatrix         | time   |  1230.0 |
|   | numhask-hmatrix | time   |  1230.0 |

